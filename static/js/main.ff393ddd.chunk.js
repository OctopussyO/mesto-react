(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(6),r=a.n(o),i=(a(15),a(4)),l=a(1),s=a(7),u=a.n(s);var m=function(){return c.a.createElement("header",{className:"header"},c.a.createElement("img",{className:"header__logo",src:u.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 '\u041c\u0435\u0441\u0442\u043e'"}))},d=Object(n.createContext)();var p=function(e){var t=e.name,a=e.link,o=e.likes,r=e._id,i=e.owner,l=e.onCardClick,s=e.onCardLike,u=e.onCardDelete,m=Object(n.useContext)(d),p=i._id===m._id,_=o.some((function(e){return e._id===m._id})),f="card__button card__button_act_like ".concat(_&&"card__button_active"," page__button");return c.a.createElement("figure",{className:"card"},p&&c.a.createElement("button",{className:"card__button card__button_act_delete page__button",type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",onClick:function(){u({_id:r})}},c.a.createElement("svg",{width:"18",height:"20",fill:"#fff",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M2.458 18.142c.06.67.61 1.158 1.28 1.158H14.26c.67 0 1.22-.508 1.28-1.158L16.72 \r 5.79H1.28l1.178 12.352zM16.72 1.93h-5.14v-.65C11.58.569 11.011 0 10.3 0H7.72C7.01 0 6.44.569 \r 6.44 1.28v.65H1.28C.569 1.93 0 2.499 0 3.21c0 .711.569 1.28 1.28 1.28h15.44c.711 0 1.28-.569 \r 1.28-1.28 0-.711-.569-1.28-1.28-1.28z"}))),c.a.createElement("button",{className:"card__button card__button_act_enlarge-image",type:"button","aria-label":"\u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c",onClick:function(){l({name:t,link:a})}},c.a.createElement("img",{className:"card__image",src:a,alt:"".concat(t,", \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f")})),c.a.createElement("figcaption",{className:"card__description"},c.a.createElement("h2",{className:"card__heading"},t),c.a.createElement("div",{className:"card__likes"},c.a.createElement("button",{className:f,type:"button","aria-label":"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",onClick:function(){s(_,{likes:o,_id:r})}},c.a.createElement("svg",{width:"20",height:"18",viewBox:"-1 -1 23 19",stroke:"black",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M19.154 9.338c2.14-2.14 2.14-5.614 0-7.733a5.486 5.486 0 00-7.755 0l-1.038 \r 1.06-1.038-1.039C7.183-.535 3.708-.535 1.589 1.605A5.43 5.43 0 000 5.482c0 1.462.572 \r 2.84 1.59 3.877l8.771 8.772 8.793-8.793z"}))),c.a.createElement("span",{className:"card__likes_quantity"},o.length))))};var _=function(e){var t=e.onEditProfile,a=e.onAddPlace,o=e.onEditAvatar,r=e.onCardClick,i=e.cards,l=e.onCardLike,s=e.onCardDelete,u=Object(n.useContext)(d),m=u.name,_=u.about,f=u.avatar;return c.a.createElement("main",{className:"main page__narrow"},c.a.createElement("section",{className:"profile"},c.a.createElement("div",{className:"profile__image",style:{backgroundImage:"url(".concat(f,")")}},c.a.createElement("button",{className:"profile__avatar-button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",type:"button",onClick:o})),c.a.createElement("div",{className:"profile__data"},c.a.createElement("h1",{className:"profile__name"},m),c.a.createElement("button",{className:"profile__edit-button page__button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",type:"button",onClick:t}),c.a.createElement("p",{className:"profile__profession"},_)),c.a.createElement("button",{className:"profile__add-button page__button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",type:"button",onClick:a})),c.a.createElement("section",{className:"gallery"},i.map((function(e){return c.a.createElement(p,Object.assign({key:e._id},e,{onCardClick:r,onCardLike:l,onCardDelete:s}))}))))};var f=function(){return c.a.createElement("footer",{className:"footer page__narrow"},c.a.createElement("p",{className:"footer__copyright"},"\xa9\xa02020 Mesto Russia"))};var b=function(e){var t=e.place,a=e.onClose,o=function(e){"Escape"===e.key&&a()};return Object(n.useEffect)((function(){return document.body.addEventListener("keydown",o),function(){document.body.removeEventListener("keydown",o)}})),c.a.createElement("div",{className:"popup popup_act_enlarge-image popup_active",onMouseDown:function(e){e.target.closest(".popup__container")||a()}},c.a.createElement("figure",{className:"popup__container"},c.a.createElement("img",{className:"popup__image",src:t.link,alt:"".concat(t.name,", \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f")}),c.a.createElement("figcaption",null,c.a.createElement("p",{className:"popup__image-caption"},"".concat(t.name,", \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f")),c.a.createElement("button",{className:"popup__close-button page__button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:a}))))},h=c.a.memo((function(e){var t=e.submitTitle,a=e.loadingTitle,n=e.isActive,o=e.isClicked;return c.a.createElement("button",{className:"popup__save-button ".concat(n?"popup__save-button_unblocked":"popup__save-button_blocked"),disabled:!n,type:"submit"},o?a:t)}));var v=function(e){var t=e.title,a=e.name,o=e.children,r=e.onClose,s=e.onSubmit,u=e.submitTitle,m=e.submitLoadingTitle,d=e.isSubmitActive,p=Object(n.useState)(!1),_=Object(l.a)(p,2),f=_[0],b=_[1],v=Object(n.useRef)(),E=Object(n.useState)(d),g=Object(l.a)(E,2),C=g[0],k=g[1],y=function(e){"Escape"===e.key&&r()};return Object(n.useEffect)((function(){return document.body.addEventListener("keydown",y),function(){document.body.removeEventListener("keydown",y)}})),Object(n.useEffect)((function(){var e=Object(i.a)(v.current.elements).filter((function(e){return e.name})).every((function(e){return e.validity.valid}));k(e)})),c.a.createElement("div",{className:"popup popup_act_".concat(a," popup_active"),onMouseDown:function(e){e.target.closest(".popup__container")||r()}},c.a.createElement("form",{action:"#",className:"popup__container popup__container_with_form",name:a,method:"GET",noValidate:!0,onSubmit:function(e){e.preventDefault(),b(!0),s()},ref:v},c.a.createElement("h2",{className:"popup__heading"},t),o,c.a.createElement(h,{submitTitle:u,loadingTitle:m,isActive:C,isClicked:f}),c.a.createElement("button",{className:"popup__close-button page__button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:r})))},E=c.a.memo((function(e){var t=e.name,a=e.placeholder,o=e.type,r=e.minLength,i=e.maxLength,s=e.value,u=e.onChange,m=e.inputRef,d=Object(n.useState)(""),p=Object(l.a)(d,2),_=p[0],f=p[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("input",{className:"popup__input popup__input_valid",name:t,placeholder:a,type:o,minLength:r,maxLength:i,required:!0,autoComplete:"off",value:s,onChange:function(e){f(e.target.validationMessage),u(e)},ref:m}),c.a.createElement("span",{className:"popup__error popup__error_in_".concat(t)},_))}));var g=function(e){var t=e.onClose,a=e.onUpdateUser,o=Object(n.useContext)(d),r=Object(n.useState)(o.name),i=Object(l.a)(r,2),s=i[0],u=i[1],m=Object(n.useState)(o.about),p=Object(l.a)(m,2),_=p[0],f=p[1];return c.a.createElement(v,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit-profile",onClose:t,onSubmit:function(){a({name:s,about:_})},submitTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",submitLoadingTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",isSubmitActive:!0},c.a.createElement("fieldset",{className:"popup__fieldset"},c.a.createElement(E,{name:"name",placeholder:"\u0418\u043c\u044f",type:"text",minLength:"2",maxLength:"40",value:s,onChange:function(e){u(e.target.value)}}),c.a.createElement(E,{name:"info",placeholder:"\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f",type:"text",minLength:"2",maxLength:"200",value:_,onChange:function(e){f(e.target.value)}})))};var C=function(e){var t=e.onClose,a=e.onUpdateAvatar,o=Object(n.useRef)(),r=Object(n.useState)(""),i=Object(l.a)(r,2),s=i[0],u=i[1];return c.a.createElement(v,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"edit-avatar",onClose:t,onSubmit:function(){a({avatar:s})},submitTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",submitLoadingTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",isSubmitActive:!1},c.a.createElement("fieldset",{className:"popup__fieldset"},c.a.createElement(E,{name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",type:"url",value:s,inputRef:o,onChange:function(){u(o.current.value)}})))};var k=function(e){var t=e.onClose,a=e.onAddPlace,o=Object(n.useState)(""),r=Object(l.a)(o,2),i=r[0],s=r[1],u=Object(n.useState)(""),m=Object(l.a)(u,2),d=m[0],p=m[1];return c.a.createElement(v,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-card",onClose:t,onSubmit:function(){a({name:i,link:d})},submitTitle:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",submitLoadingTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",isSubmitActive:!1},c.a.createElement("fieldset",{className:"popup__fieldset"},c.a.createElement(E,{name:"place",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",type:"text",minLength:"1",maxLength:"30",value:i,onChange:function(e){s(e.target.value)}}),c.a.createElement(E,{name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",type:"url",value:d,onChange:function(e){p(e.target.value)}})))};var y=function(e){var t=e.deletedCard,a=e.onConfirmDelete,n=e.onClose;return c.a.createElement(v,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"confirm",onClose:n,onSubmit:function(){a(t)},submitTitle:"\u0414\u0430",submitLoadingTitle:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...",isSubmitActive:!0})},O=a(8),j=a(9),N=(document.querySelector(".profile__edit-button"),document.querySelector(".profile__avatar-button"),document.querySelector(".profile__add-button"),new(function(){function e(t){Object(O.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers,this._contentType=t.headers["Content-Type"]}return Object(j.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getUserData",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._handleResponse)}},{key:"getData",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._handleResponse)}},{key:"saveUserData",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"saveUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"saveNewItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"likeItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._handleResponse)}},{key:"unlikeItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}},{key:"deleteItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-15",headers:{authorization:"584f4afd-78a5-47f8-908c-ac61484f6bb9","Content-Type":"application/json"}}));var S=function(){var e=Object(n.useState)(!0),t=Object(l.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(!1),s=Object(l.a)(r,2),u=s[0],p=s[1],h=Object(n.useState)(!1),v=Object(l.a)(h,2),E=v[0],O=v[1],j=Object(n.useState)(!1),S=Object(l.a)(j,2),w=S[0],L=S[1],T=Object(n.useState)(!1),U=Object(l.a)(T,2),A=U[0],x=U[1],D=Object(n.useState)(!1),R=Object(l.a)(D,2),P=R[0],I=R[1],M=Object(n.useState)(!1),H=Object(l.a)(M,2),q=H[0],J=H[1],z=function(){x(!1),O(!1),L(!1),I(!1),J(!1)},B=Object(n.useState)({}),W=Object(l.a)(B,2),F=W[0],G=W[1],V=Object(n.useState)({name:"",about:"",avatar:""}),$=Object(l.a)(V,2),K=$[0],Q=$[1],X=Object(n.useState)([]),Y=Object(l.a)(X,2),Z=Y[0],ee=Y[1];return Object(n.useEffect)((function(){Promise.all([N.getUserData(),N.getData()]).then((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];Q(a),ee(n),p(!0)})).catch((function(e){alert(e)})).finally((function(){o(!1)}))}),[]),c.a.createElement(d.Provider,{value:K},c.a.createElement("div",{className:"page"},c.a.createElement("div",{className:"page__container"},c.a.createElement(m,null),a?c.a.createElement("div",{className:"spinner spinner_visible"}):c.a.createElement("div",{className:"content ".concat(!u&&"content_hidden")},c.a.createElement(_,{onAddPlace:function(){L(!0)},onEditAvatar:function(){x(!0)},onEditProfile:function(){O(!0)},onCardClick:function(e){G(e),I(!0)},cards:Z,onCardLike:function(e,t){(e?N.unlikeItem.bind(N):N.likeItem.bind(N))(t._id,!e).then((function(e){var a=Z.map((function(a){return a._id===t._id?e:a}));ee(a)})).catch((function(e){alert(e)}))},onCardDelete:function(e){G(e),J(!0)}})),c.a.createElement(f,null)),E&&c.a.createElement(g,{onClose:z,onUpdateUser:function(e){N.saveUserData(e).then((function(e){Q(e)})).catch((function(e){alert(e)})).finally((function(){z()}))}}),A&&c.a.createElement(C,{onClose:z,onUpdateAvatar:function(e){N.saveUserAvatar(e).then((function(e){Q(e)})).catch((function(e){alert(e)})).finally((function(){z()}))}}),w&&c.a.createElement(k,{onClose:z,onAddPlace:function(e){N.saveNewItem(e).then((function(e){ee([e].concat(Object(i.a)(Z)))})).catch((function(e){alert(e)})).finally((function(){z()}))}}),P&&c.a.createElement(b,{place:F,onClose:z}),q&&c.a.createElement(y,{deletedCard:F,onClose:z,onConfirmDelete:function(e){N.deleteItem(e._id).then((function(){var t=Z.filter((function(t){return t._id!==e._id}));ee(t)})).catch((function(e){alert(e)})).finally((function(){z()}))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,a){e.exports=a.p+"static/media/logo.e889e45f.svg"}},[[10,1,2]]]);
//# sourceMappingURL=main.ff393ddd.chunk.js.map